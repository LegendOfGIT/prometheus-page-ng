<div #itemSection>
  <div *ngIf="item" [ngClass]="['m-2', 'informationItem', item.itemId ? '' : 'informationItem--loading', showBig ? 'informationItem--big' : '', cssModifier ? 'informationItem' + cssModifier : '', additionalCssClasses]">
    <div [ngClass]="['d-flex justify-content-center position-relative p-2 informationItem__imageContainer', cssModifier ? 'informationItem__imageContainer' + cssModifier : '', item.itemId ? '' : 'informationItem__imageContainer--loading']">
      <a href="{{itemUrl}}" class="informationItem--link" (click)="pickedInformation(item, itemUrl, $event)" target="{{linkTarget}}">
        <img *ngIf="item.itemId"
             class="informationItem__image{{showBig ? ' informationItem__image--big' : ''}}{{cssModifier ? ' informationItem__image' + cssModifier : ''}}"
             alt="{{'IMAGE_OF' | translate }} {{item.title}}"
             [src]="showAlternateImage ? imageUrl : item.titleImage || ''"
             (mouseenter)="imageUrl = item.titleImage || ''; currentImageIndex = 0"
             (error)="imageUrl = 'assets/images/broken-image.png'"
             loading="lazy"
        />
        <div class="d-inline-flex justify-content-center fw-bold align-items-center mb-1 informationItem__stamp{{showBig ? ' informationItem__stamp--big' : ''}}" *ngIf="renderedReduction">{{renderedReduction}}</div>
      </a>
      <app-add-to-wishlist [item]="item" *ngIf="showWishlistIcon"></app-add-to-wishlist>
    </div>

    <a href="{{itemUrl}}" class="informationItem--link" (click)="pickedInformation(item, itemUrl, $event)" target="{{linkTarget}}" >
      <div class="mt-1 informationItem__contentContainer{{cssModifier ? ' informationItem__contentContainer' + cssModifier : ''}}">
        <div *ngIf="showPrice">
          <div *ngIf="renderLowestPrice(item); else noPrice" [ngClass]="['button', 'fw-bold', 'justify-content-center', 'mb-3', 'informationItem__priceWrapper']">
            <span *ngIf="!hasOnlyOneOffer">{{ 'PRICE_FROM' | translate }}</span>
            <span class="informationItem__price{{showBig ? ' informationItem__price--big' : ''}}">&nbsp;{{renderLowestPrice(item) || ''}}</span>
          </div>
          <ng-template #noPrice>
            <div [ngClass]="['informationItem__price', 'informationItem__price--hidden']">
              &nbsp;
            </div>
          </ng-template>
        </div>
      </div>
    </a>

    <div *ngIf="discountItem" class="mb-2 informationItem__discount" (click)="discountDialog.showModal()">
      {{discountItem.teaser | translate}} *
      <div>
        <b>{{ 'DISCOUNT_SHOW_MORE' | translate }}</b>
      </div>
    </div>

    <a href="{{itemUrl}}" class="informationItem--link" *ngIf="showOfferDetailsLink" (click)="pickedInformation(item, itemUrl, $event)" target="{{linkTarget}}">
      <span>{{getShopNameOfItem()}}</span>
    </a>
    <a href="{{singleProductViewUrl}}" class="mb-1 d-block informationItem__details--link" *ngIf="showOfferDetailsLink" (click)="pickedInformation(item, singleProductViewUrl, $event)">
      <div>{{ 'OFFER_DETAILS' | translate }}</div>
    </a>
    <a href="{{itemUrl}}" class="informationItem--link" (click)="pickedInformation(item, itemUrl, $event)" target="{{linkTarget}}">
        <div class="informationItem__title{{cssModifier ? ' informationItem__title' + cssModifier : ''}}">{{ itemTitle | translate }}</div>
    </a>

    <a *ngFor="let hashtag of item.hashtags" href="/hashtags/{{hashtag}}" (click)="exploreHashtag(hashtag, $event)">
      <div *ngIf="showHashtags" class="d-inline-flex flex-wrap">
        <div class="button informationItem__hashtag">
            #{{hashtag}}
        </div>
      </div>
    </a>
  </div>
</div>

<dialog #discountDialog class="dialog informationItem__discountDialog">
  <div class="dialog__close" (click)="discountDialog.close()">
    <i class="fa fa-times-circle"></i>
  </div>

  <div *ngIf="discountItem">
    <div>
      {{discountItem.teaser || '' | translate}} <span *ngIf="discountItem.conditions">*</span>
    </div>
    <div class="mb-2 mt-2">
      <b>CODE: </b>
      <b *ngIf="discountItem.code">{{discountItem.code || ''}}</b>
      <span *ngIf="!discountItem.code">{{ 'DISCOUNT_NO_CODE_REQUIRED' | translate }}</span>
    </div>
    <div *ngIf="discountItem.maximumDate">
      {{ 'DISCOUNT_UNTIL' | translate }} {{ discountItem.maximumDate | date: 'dd.MM.yyyy' }}
    </div>

    <div *ngIf="item" class="d-flex justify-content-center">
      <a href="{{itemUrl}}" class="button fw-bold justify-content-center mb-2 informationItem__priceWrapper informationItem__price informationItem__discountDialogLink" (click)="pickedInformation(item, itemUrl, $event)" target="{{linkTarget}}">
        {{ 'DISCOUNT_GET_IT_NOW' | translate }}
      </a>
    </div>

    <div *ngIf="discountItem.conditions">
      * {{discountItem.conditions || '' | translate}}
    </div>

    <div class="container mt-2">
      <div class="col-12">
        {{ 'PROVISION_DISCLAIMER' | translate }}
      </div>
    </div>
  </div>
</dialog>
